# Database Schema

The database schema is defined using Pydantic models and managed by SQLAlchemy.

## Event Table

The `events` table stores information about each endurance riding event.

| Column Name          | Data Type      | Description                                                                                                                                                                                                                            |
| -------------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `id`                 | Integer        | Primary key, auto-incrementing.                                                                                                                                                                                                        |
| `name`               | String         | The name of the event.                                                                                                                                                                                                                 |
| `date_start`         | Date           | The start date of the event.                                                                                                                                                                                                            |
| `date_end`           | Date           | The end date of the event (can be the same as `date_start` for single-day events).                                                                                                                                                     |
| `location`           | String         | A textual representation of the event location (e.g., "City, State").                                                                                                                                                                    |
| `region`             | String         | The region the event belongs to (e.g., "SW", "NE").                                                                                                                                                                                     |
| `description`        | Text           | A description of the event.                                                                                                                                                                                                            |
| `website`            | String         | The URL of the event's website (if available).                                                                                                                                                                                          |
| `flyer_url`          | String         | The URL of the event's flyer (if available).                                                                                                                                                                                             |
| `distances`          | String         | A comma-separated string of distances offered at the event (e.g., "25 miles, 50 miles").                                                                                                                                               |
| `ride_manager`       | String         | The name of the ride manager.                                                                                                                                                                                                          |
| `manager_email`      | String         | The email address of the ride manager.                                                                                                                                                                                                 |
| `manager_phone`      | String         | The phone number of the ride manager.                                                                                                                                                                                                  |
| `external_id`        | String         | An ID used to link the event to an external system (if applicable).                                                                                                                                                                     |
| `is_canceled`        | Boolean        | Indicates whether the event has been canceled.                                                                                                                                                                                          |
| `event_details`      | JSON           | A JSON object containing additional event details (e.g., coordinates, map link, control judges, intro ride flag).                                                                                                                      |
| `latitude`           | Float          | The latitude of the event location (if geocoding is successful).                                                                                                                                                                        |
| `longitude`          | Float          | The longitude of the event location (if geocoding is successful).                                                                                                                                                                       |
| `geocoding_attempted` | Boolean        | **NEW:** Indicates whether geocoding has been attempted for this event.  `True` means an attempt was made (regardless of success). `False` means no attempt has been made. This helps track which locations might need manual review. | 